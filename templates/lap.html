{% extends "base.html" %}

{% block content %}
<h2>Lap Time Analysis</h2>

<form method="POST">
    <div class="form-group">
        <label>Year:</label>
        <input type="number" name="year" placeholder="2023" required>
    </div>

    <div class="form-group">
        <label>Grand Prix:</label>
        <input type="text" name="gp" placeholder="Monza" required>
    </div>

    <div class="form-group">
        <label>Driver Code:</label>
        <input type="text" name="driver" placeholder="VER" required maxlength="3">
    </div>

    <button type="submit" class="btn">Analyze Laps</button>
</form>

{% if error %}
<div style="background: #c70500; color: white; padding: 1rem; border-radius: 4px; margin-top: 2rem;">
    <strong>Error:</strong> {{ error }}
</div>
{% endif %}

{% if laps is not none and not laps.empty %}
<table class="data-table">
    <tr>
        <th>Lap</th>
        <th>Time</th>
    </tr>
    {% for _, row in laps.iterrows() %}
    <tr>
        <td>{{ row['LapNumber'] }}</td>
        <td>{{ row['LapTime'] }}</td>
    </tr>
    {% endfor %}
</table>
{% else %}
<p style="color: #a0a0a0; margin-top: 2rem;">No lap data available.</p>
{% endif %}

{% endblock %}
